(function(h){function f(a,b){for(var c=b||h,e="[object Array]"===Object.prototype.toString.call(a)?a:a.split("."),d=0,f=e.length;d<f;d+=1)"undefined"===typeof c[e[d]]&&(c[e[d]]={}),c=c[e[d]];return c}function g(a,b,c){for(var e in b)!b.hasOwnProperty(e)||c&&-1!==c.indexOf(e)||(a[e]=b[e]);return a}function k(a,b){var c=a.split("."),e=c.pop();f(c,l)[e]=g({},b)}function m(a,b,c){var e=a.split(".");a=e.pop();var e=f(e),d=(new Function("func","return function "+a+"(){ func.apply(this, arguments); }"))(function(){d.constr&&
!d.__initializing&&(this.constructor=d,this.baseconstructor=this.constructor.prototype.constructor,d.constr.apply(this,arguments))});e[a]=d;b?(b.__initializing=!0,d.prototype=new b,delete b.__initializing,d.prototype.constructor=b,d.constr=b):d.prototype={};if(c){g(d.prototype,c,["constructor"]);if("[object Array]"===Object.prototype.toString.call(c.mixins))for(b=0,a=c.mixins.length;b<a;b+=1)g(d.prototype,l[c.mixins[b]],["constructor"]);d.constr=c.constructor||d.constr}return d}var l={},n={__getEvent:function(a){this.hasOwnProperty("__events")||
(this.__events={});a=a.split(".").reverse();var b=a.pop(),b=this.__events[b]||(this.__events[b]={});a=f(a,b);a.__handlers||(a.__handlers=[]);return a},__getHandlers:function(a){var b=a.__handlers.slice(),c;for(c in a)a.hasOwnProperty(c)&&"__handlers"!==c&&Array.prototype.push.apply(b,this.__getHandlers(a[c]));return b},on:function(a,b,c){this.__getEvent(a).__handlers.push({handler:b,scope:c});return this},off:function(a){a="undefined"===typeof a?this.__events:this.__getEvent(a);for(var b in a)"__handlers"===
b?a.__handlers=[]:delete a[b];return this},trigger:function(a){var b=Array.prototype.slice.call(arguments),c=this.__getHandlers(this.__getEvent(a));b[0]=this;for(var e=0,d=c.length;e<d;e++)c[e].handler.apply(c[e].scope||this,b);return this}};m("Simple.Observable",null,n);k("events",n);h.Simple=g({},{defineClass:m,defineMixin:k,namespace:f})})(window);